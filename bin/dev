#!/bin/bash

echo "ðŸš€ Starting CareBridge AI Development Servers..."
echo ""

# Check if we're in the right directory
if [ ! -f "manage.py" ]; then
    echo "âŒ Error: Run this from the project root directory"
    exit 1
fi

# Start Django backend
echo "ðŸ“¡ Starting Django backend on port 8080..."
python manage.py runserver 8080 &
DJANGO_PID=$!

# Give Django a moment to start
sleep 2

# Start Vite frontend
echo "âš›ï¸  Starting Vite frontend on port 5173..."
cd frontend && npm run dev

# Cleanup function
cleanup() {
    echo ""
    echo "ðŸ›‘ Shutting down servers..."
    kill $DJANGO_PID 2>/dev/null
    exit 0
}

# Register cleanup on script exit
trap cleanup EXIT INT TERM
